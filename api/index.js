export default async function handler(req, res) {
  // โ ูู ุญุงูุฉ ุงููุญุต ุฃู ุงูุชุฃูุฏ ูู ุงูุชุดุบูู
  if (req.method === "GET") {
    return res.status(200).json({
      message: "โ API is running successfully!",
      note: "ุงููุงุฌูุฉ ูุชุตูุฉ ุงูุขู โ ููููู ุจุฏุก ุชุดุบูู ุงูุฃุฏุงุฉ."
    });
  }

  // โ ูู ุญุงูุฉ ุงุณุชูุงู ุฃูุงูุฑ ูู ุงููุงุฌูุฉ (POST)
  if (req.method === "POST") {
    const { action, data } = req.body;

    switch (action) {
      // ุงุฎุชุจุงุฑ ุงูุงุชุตุงู ุจูู ุงููุงุฌูุฉ ูุงูุณูุฑูุฑ
      case "test_connection":
        return res.status(200).json({
          reply: "๐ก ุงูุงุชุตุงู ูุงุฌุญ ูุน ุงููุธุงูุ ุงูุณูุฑูุฑ ูุนูู ุจููุงุกุฉ."
        });

      // ุฅุฑุณุงู ุฑุณุงูุฉ ุชุฌุฑูุจูุฉ ูู ุงููุงุฌูุฉ ุฅูู ุงููุธุงู
      case "send_message":
        return res.status(200).json({
          reply: `๐ฌ ุชู ุงุณุชูุจุงู ุงูุฑุณุงูุฉ ุจูุฌุงุญ: ${data}`
        });

      // ุงูุฑุฏ ุงูุฐูู ุงููุจุฏุฆู (ูุงุญููุง ูุฑุจุทู ุจู OpenAI ุฃู DeepStack)
      case "ai_reply":
        return res.status(200).json({
          reply: `๐ค ุฑุฏ ุฐูู ูุจุฏุฆู: ${data}`
        });

      // ุญุงูุฉ ุทูุจ ุบูุฑ ูุนุฑูู
      default:
        return res.status(400).json({
          error: "โ๏ธ ูู ูุชู ุงูุชุนุฑู ุนูู ููุน ุงูุทูุจ ุงููุฑุณู ูู ุงููุงุฌูุฉ."
        });
    }
  }

  // โ ูู ุญุงูุฉ ุฅุฑุณุงู ููุน ุทูุจ ุบูุฑ ูุฏุนูู
  return res.status(405).json({
    error: "โ ููุน ุงูุทูุจ ุบูุฑ ูุฏุนูู. ุงุณุชุฎุฏู GET ุฃู POST ููุท."
  });
}
